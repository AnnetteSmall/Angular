import { Injectable } from "@angular/core";

import {Recipe} from "./recipe.model";
import {Ingredient} from "../shared/ingeredient.model";
import {ShoppingListService} from "../shopping-list/shopping-list.service";
import {Subject} from "rxjs/Subject";

@Injectable()

export class RecipeService {
  recipesChanged = new Subject<Recipe[]>();

  private recipes: Recipe[] = [
    new Recipe(
      'Chicken schnitzel',
      'Summer deliciousness.',
      'http://img.taste.com.au/fHczUvqF/w720-h480-cfill-q80/taste/2016/11/chicken-schnitzel-77551-1.jpeg',
      'Combine breadcrumbs, ...',
      [
        new Ingredient('Meat', 1),
        new Ingredient('Salad', 1)
      ]),
    new Recipe(
      'Dark chocolate mousse cake',
      'The Great South African Bake Off',
      'data:image/jpeg;base64,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',
      'Step 1, Step2, Step 3...',
      [
        new Ingredient('Flour', 5),
        new Ingredient('Baking Powder', 6)
      ])
  ];

  constructor(private slService:ShoppingListService){}

  setRecipes(recipes: Recipe[]) {
    this.recipes = recipes;
    console.log(this.recipes);
    this.recipesChanged.next(this.recipes.slice());
  }

  getRecipes(){
    return this.recipes.slice();
  }
  getRecipe(index: number){
    return this.recipes[index];
  }

  addIngredientsToShoppingList(ingredients: Ingredient[]){
  this.slService.addIngredients(ingredients);
  }

  addRecipe(recipe: Recipe){
    this.recipes.push(recipe);
    this.recipesChanged.next(this.recipes.slice());
  }

  updateRecipe(index: number, newRecipe: Recipe) {
    console.log(newRecipe)
    this.recipes[index] = newRecipe;
    this.recipesChanged.next(this.recipes.slice());
  }

  deleteRecipe(index: number) {
    this.recipes.splice(index,1);
    this.recipesChanged.next(this.recipes.slice());
  }
}





